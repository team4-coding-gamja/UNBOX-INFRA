# Payment Service - Local k3d 환경 오버라이드
image:
  repository: 632941626317.dkr.ecr.ap-northeast-2.amazonaws.com/unbox-dev-payment-repo
  tag: local-2044477

env:
  SPRING_JWT_SECRET: "c2VjcmV0S2V5Rm9yTG9jYWxEZXZlbG9wbWVudFRoaXNJc1ZlcnlJbXBvcnRhbnQ="
  SPRING_JPA_SHOW_SQL: "true"  # 로컬에서는 SQL 로그 활성화
  
  # 로컬 PostgreSQL 사용
  SPRING_DATASOURCE_URL: "jdbc:postgresql://postgresql.unbox-db.svc.cluster.local:5432/unbox_payment"
  SPRING_DATASOURCE_USERNAME: "unbox_admin"
  SPRING_DATASOURCE_PASSWORD: "local_password_123"
  
  # 로컬 Kafka
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "kafka.unbox-infra.svc.cluster.local:9092"
  
  # 로컬 Redis 사용
  SPRING_DATA_REDIS_HOST: "redis-master.unbox-db.svc.cluster.local"
  SPRING_DATA_REDIS_PORT: "6379"
  
  # 로컬 Zipkin
  MANAGEMENT_ZIPKIN_TRACING_ENDPOINT: "http://zipkin.unbox-infra.svc.cluster.local:9411/api/v2/spans"

# Argo Rollouts 설정 (Local 환경)
rollout:
  enabled: true
  blueGreen:
    autoPromotionEnabled: true   # Local에서는 자동 전환
    autoPromotionSeconds: 120    # 2분 후 자동 전환
    scaleDownDelaySeconds: 30    # 30초 후 이전 버전 삭제  analysis:
    enabled: false  # 로컬에서는 analysis 비활성화
